<!DOCTYPE html>
<html lang="en"> <!-- Change to "el" for Greek pages -->

<head>
    <!-- Essential meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Professional insurance services in Greece.">
    <meta name="keywords" content="insurance, Greece, health insurance, car insurance">
    <meta name="author" content="George Mavridis">

    <!-- Open Graph (social sharing) -->
    <meta property="og:title" content="Professional Insurance Services in Greece">
    <meta property="og:description" content="Reliable insurance services tailored to your needs.">
    <meta property="og:image" content="{{ url_for('static', filename='images/jumbotron.jpg') }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.url }}">

    <title>
        {% block title %}
        {% endblock title %}
    </title>

    <!-- Bootstrap CSS (latest stable) -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Base Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/navbar.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/footer.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cookies_banner.css') }}">


        {% block styles %}
        {% endblock %}

    <!-- Flag Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/6.6.6/css/flag-icons.min.css">

    <!-- Favicons (cross-device support) -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicons/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='images/favicons/favicon-16x16.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='images/favicons/apple-touch-icon.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='images/favicons/site.webmanifest') }}">
    <link rel="shortcut icon" href="{{ url_for('static', filename='images/favicons/favicon.ico') }}">

    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>


<body class="d-flex flex-column min-vh-100">

    <!-- Banner / Jumbotron -->
    <div class="jumbotron-container">
        <img src="{{ url_for('static', filename='images/jumbotron.jpg') }}" 
             alt="Insurance banner"
             class="img-fluid jumbotron-img">
    </div>

    <!-- Navbar -->
    {% include "partials/navbar.html" %}

    <!-- Page content -->
    <main class="flex-grow-1">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            <div class="flash-messages">
              {% for category, message in messages %}
                <div class="alert alert-{{ category }}">
                  {{ message }}
                  <button type="button" class="close-btn" onclick="this.parentElement.remove();">&times;</button>
                </div>
              {% endfor %}
            </div>
          {% endif %}
        {% endwith %}

        {% block content %}
        {% endblock content %}
    </main>

    <!-- Footer -->
    {% include "partials/footer.html" %}

    <!-- Cookie Banner -->
    <div id="cookie-banner">
        <span>{{ cookies.message }}</span>
        <div>
          <button id="accept-cookies" class="btn btn-accept">{{ cookies.accept }}</button>
          <button id="reject-cookies" class="btn btn-reject">{{ cookies.reject }}</button>
          <a href="{{ url_for('main.cookies_policy') }}" class="more-info">{{ cookies.more_info }}</a>
        </div>
    </div>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Cookies JS -->
    <script>
  document.addEventListener("DOMContentLoaded", function () {
    const banner = document.getElementById('cookie-banner');
    const consent = localStorage.getItem('cookie_consent');

    if (consent === 'accepted') {
      loadAnalytics();
    } else if (consent === 'rejected') {
      // do nothing
    } else {
      banner.classList.add('show');
    }

    document.getElementById('accept-cookies').addEventListener('click', () => {
      localStorage.setItem('cookie_consent', 'accepted');
      hideBanner();
      loadAnalytics();
    });

    document.getElementById('reject-cookies').addEventListener('click', () => {
      localStorage.setItem('cookie_consent', 'rejected');
      hideBanner();
    });

    function hideBanner() {
      banner.classList.remove('show');
    }

    function loadAnalytics() {
      const gtagScript = document.createElement('script');
      gtagScript.src = "https://www.googletagmanager.com/gtag/js?id=G-0RFNCFVFCL";
      gtagScript.async = true;
      document.head.appendChild(gtagScript);

      gtagScript.onload = () => {
        window.dataLayer = window.dataLayer || [];
        function gtag(){ dataLayer.push(arguments); }
        window.gtag = gtag;
        gtag('js', new Date());
        gtag('config', 'G-0RFNCFVFCL', { 'debug_mode': true }); // keep { 'debug_mode': true } only while testing
      };
    }
  });
</script>



</body>


</html>
